import{j as o,P as g,d as y,e as z,f as S,u as k,g as w,h as Y,i as Q,k as W,l as I,m as J,n as Z,R as ee,I as oe,C as te,o as re,p as ae,q as se,r as ne,s as ie,B as ce}from"./ui-BcK3PHEv.js";import{r as i}from"./vendor-EbjP5vkK.js";import{l as de}from"./stripe-KTjR3gaz.js";var le="Label",E=i.forwardRef((t,r)=>o.jsx(g.label,{...t,ref:r,onMouseDown:e=>{var s;e.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));E.displayName=le;var A=E;const ue=z("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=i.forwardRef(({className:t,...r},e)=>o.jsx(A,{ref:e,className:y(ue(),t),...r}));R.displayName=A.displayName;var C="Radio",[pe,P]=S(C),[me,fe]=pe(C),D=i.forwardRef((t,r)=>{const{__scopeRadio:e,name:d,checked:s=!1,required:n,disabled:u,value:m="on",onCheck:f,...v}=t,[x,p]=i.useState(null),c=k(r,h=>p(h)),a=i.useRef(!1),l=x?!!x.closest("form"):!0;return o.jsxs(me,{scope:e,checked:s,disabled:u,children:[o.jsx(g.button,{type:"button",role:"radio","aria-checked":s,"data-state":O(s),"data-disabled":u?"":void 0,disabled:u,value:m,...v,ref:c,onClick:w(t.onClick,h=>{s||f==null||f(),l&&(a.current=h.isPropagationStopped(),a.current||h.stopPropagation())})}),l&&o.jsx(he,{control:x,bubbles:!a.current,name:d,value:m,checked:s,required:n,disabled:u,style:{transform:"translateX(-100%)"}})]})});D.displayName=C;var _="RadioIndicator",G=i.forwardRef((t,r)=>{const{__scopeRadio:e,forceMount:d,...s}=t,n=fe(_,e);return o.jsx(Y,{present:d||n.checked,children:o.jsx(g.span,{"data-state":O(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:r})})});G.displayName=_;var he=t=>{const{control:r,checked:e,bubbles:d=!0,...s}=t,n=i.useRef(null),u=Q(e),m=W(r);return i.useEffect(()=>{const f=n.current,v=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(v,"checked").set;if(u!==e&&p){const c=new Event("click",{bubbles:d});p.call(f,e),f.dispatchEvent(c)}},[u,e,d]),o.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:e,...s,tabIndex:-1,ref:n,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function O(t){return t?"checked":"unchecked"}var ve=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N="RadioGroup",[xe,Ie]=S(N,[I,P]),$=I(),M=P(),[be,Re]=xe(N),q=i.forwardRef((t,r)=>{const{__scopeRadioGroup:e,name:d,defaultValue:s,value:n,required:u=!1,disabled:m=!1,orientation:f,dir:v,loop:x=!0,onValueChange:p,...c}=t,a=$(e),l=J(v),[h,b]=Z({prop:n,defaultProp:s,onChange:p});return o.jsx(be,{scope:e,name:d,required:u,disabled:m,value:h,onValueChange:b,children:o.jsx(ee,{asChild:!0,...a,orientation:f,dir:l,loop:x,children:o.jsx(g.div,{role:"radiogroup","aria-required":u,"aria-orientation":f,"data-disabled":m?"":void 0,dir:l,...c,ref:r})})})});q.displayName=N;var L="RadioGroupItem",T=i.forwardRef((t,r)=>{const{__scopeRadioGroup:e,disabled:d,...s}=t,n=Re(L,e),u=n.disabled||d,m=$(e),f=M(e),v=i.useRef(null),x=k(r,v),p=n.value===s.value,c=i.useRef(!1);return i.useEffect(()=>{const a=h=>{ve.includes(h.key)&&(c.current=!0)},l=()=>c.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",l),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",l)}},[]),o.jsx(oe,{asChild:!0,...m,focusable:!u,active:p,children:o.jsx(D,{disabled:u,required:n.required,checked:p,...f,...s,name:n.name,ref:x,onCheck:()=>n.onValueChange(s.value),onKeyDown:w(a=>{a.key==="Enter"&&a.preventDefault()}),onFocus:w(s.onFocus,()=>{var a;c.current&&((a=v.current)==null||a.click())})})})});T.displayName=L;var ge="RadioGroupIndicator",V=i.forwardRef((t,r)=>{const{__scopeRadioGroup:e,...d}=t,s=M(e);return o.jsx(G,{...s,...d,ref:r})});V.displayName=ge;var F=q,K=T,ye=V;const B=i.forwardRef(({className:t,...r},e)=>o.jsx(F,{className:y("grid gap-2",t),...r,ref:e}));B.displayName=F.displayName;const U=i.forwardRef(({className:t,...r},e)=>o.jsx(K,{ref:e,className:y("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:o.jsx(ye,{className:"flex items-center justify-center",children:o.jsx(te,{className:"h-3.5 w-3.5 fill-primary"})})}));U.displayName=K.displayName;const j=[{value:"monthly-10",label:"$10",amount:1e3},{value:"monthly-20",label:"$20",amount:2e3},{value:"monthly-50",label:"$50",amount:5e3}];function we({selectedOption:t,onOptionChange:r}){return o.jsxs("div",{className:"space-y-4",children:[o.jsx(R,{className:"text-base font-semibold",children:"Select a donation option:"}),o.jsx(B,{value:t,onValueChange:r,className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:j.map(e=>o.jsx(R,{className:`flex items-center justify-between rounded-lg border p-4 cursor-pointer ${t===e.value?"border-primary":"border-gray-200"}`,children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(U,{value:e.value,id:e.value}),o.jsx("span",{children:e.label})]})},e.value))})]})}const H=i.forwardRef(({className:t,type:r,...e},d)=>o.jsx("input",{type:r,className:y("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:d,...e}));H.displayName="Input";function je({customAmount:t,onCustomAmountChange:r}){return o.jsxs("div",{className:"space-y-2",children:[o.jsx(R,{htmlFor:"custom-amount",className:"text-base font-semibold",children:"Or enter a custom amount (min $3):"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),o.jsx(H,{type:"number",id:"custom-amount",placeholder:"Enter amount",value:t,onChange:r,min:3,max:1e5,step:1,className:"pl-8"})]})]})}const Ce=de("pk_test_51Puser01AoyUoeVtKss0QYabiq4gO0ErvljxQh1H6WKSDptq0i2ZGAqRXw5T4eyIoPBbCXqAXRLBkVReDjtjOukx00TkhM3Agk");function Ee(){const[t,r]=i.useState("monthly-10"),[e,d]=i.useState(""),[s,n]=i.useState(null),[u,m]=i.useState(!1),f=p=>{const c=p.target.value,a=parseInt(c,10);(c===""||a>=3&&a<=1e5)&&(d(c),r(""))},v=p=>{r(p);const c=j.find(a=>a.value===p);c&&d((c.amount/100).toString())},x=async p=>{p.preventDefault(),n(null),m(!0);const c=await Ce;if(!c){n("Stripe has not been initialized."),m(!1);return}let a;if(e)a=parseInt(e,10)*100;else{const l=j.find(h=>h.value===t);a=l?l.amount:0}if(a<300||a>1e7){n("Invalid amount. Must be between $3 and $100,000."),m(!1);return}try{const l=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:a,success_url:`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${window.location.origin}/cancel`})});if(!l.ok){const X=await l.json();throw new Error(X.error||"Unknown error")}const{sessionId:h}=await l.json(),{error:b}=await c.redirectToCheckout({sessionId:h});if(b)throw new Error(b.message||"An error occurred while redirecting to Stripe Checkout.")}catch(l){n(l instanceof Error?l.message:"An unexpected error occurred")}m(!1)};return o.jsxs(re,{className:"w-full max-w-md mx-auto",children:[o.jsxs(ae,{children:[o.jsx(se,{className:"text-2xl font-bold text-center",children:"Donate Now"}),o.jsx(ne,{className:"text-center",children:"Your support makes a difference"})]}),o.jsx(ie,{children:o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsx(we,{selectedOption:t,onOptionChange:v}),o.jsx(je,{customAmount:e,onCustomAmountChange:f}),s&&o.jsx("div",{className:"text-red-500",children:s}),o.jsx(ce,{type:"submit",className:"w-full",disabled:u,children:u?"Processing...":"Donate Now"})]})})]})}export{Ee as DonationFormComponent};
//# sourceMappingURL=donation-form-BcrBgzJ4.js.map
